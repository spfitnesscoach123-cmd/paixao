{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.pixelsToMeters = pixelsToMeters;\n  exports.calculateVelocity = calculateVelocity;\n  Object.defineProperty(exports, \"BarTrackerState\", {\n    enumerable: true,\n    get: function () {\n      return BarTrackerState;\n    }\n  });\n  Object.defineProperty(exports, \"BarPositionSimulator\", {\n    enumerable: true,\n    get: function () {\n      return BarPositionSimulator;\n    }\n  });\n  exports.createDefaultConfig = createDefaultConfig;\n  /**\n   * VBT Bar Tracking Service\n   * \n   * This module provides barbell tracking functionality for Velocity Based Training.\n   * \n   * ARCHITECTURE:\n   * - Uses a strategy pattern for easy swapping between simulation and real tracking\n   * - Real tracking requires native build with react-native-vision-camera + MediaPipe\n   * - Simulation mode works on web preview for development/testing\n   * \n   * PHYSICS MODEL:\n   * - Tracks vertical displacement of barbell markers\n   * - Calculates instantaneous velocity: v = Δy / Δt\n   * - Detects concentric (lifting) and eccentric (lowering) phases\n   * - Implements rep detection via velocity sign changes\n   */\n\n  // Constants\n  const GRAVITY = 9.81; // m/s²\n  const MIN_REP_DURATION = 300; // ms\n  const STATIONARY_THRESHOLD = 0.05; // m/s\n\n  /**\n   * Convert pixel displacement to real-world meters\n   * Uses pinhole camera model: real_size = (pixel_size * distance) / focal_length\n   */\n  function pixelsToMeters(pixelDisplacement, calibration) {\n    // Estimate focal length from FOV\n    const focalLengthPixels = calibration.frameHeight / (2 * Math.tan(calibration.fov * Math.PI / 360));\n\n    // Calculate real displacement\n    const realDisplacement = pixelDisplacement * calibration.distanceCm / (focalLengthPixels * 100);\n    return realDisplacement;\n  }\n\n  /**\n   * Calculate instantaneous velocity from two position samples\n   */\n  function calculateVelocity(pos1, pos2, calibration) {\n    const timeDelta = (pos2.timestamp - pos1.timestamp) / 1000; // Convert to seconds\n\n    if (timeDelta <= 0) return 0;\n\n    // Convert normalized Y to pixels, then to meters\n    const pixelDelta = (pos2.y - pos1.y) * calibration.frameHeight;\n    const meterDelta = pixelsToMeters(pixelDelta, calibration);\n\n    // Velocity (positive = moving up/concentric phase)\n    // Note: In image coordinates, Y increases downward, so we negate\n    return -meterDelta / timeDelta;\n  }\n\n  /**\n   * Bar Tracking State Machine\n   * Manages position history, velocity calculations, and rep detection\n   */\n  class BarTrackerState {\n    positions = [];\n    velocities = [];\n    repVelocities = [];\n    firstRepMeanVelocity = null;\n    repCount = 0;\n    lastRepTime = 0;\n    currentPhase = 'stationary';\n    repStartTime = 0;\n    repPeakVelocity = 0;\n    constructor(config) {\n      this.config = config;\n    }\n\n    /**\n     * Process a new bar position and return velocity data\n     */\n    processPosition(position) {\n      this.positions.push(position);\n\n      // Keep only last 30 positions (about 1 second at 30fps)\n      if (this.positions.length > 30) {\n        this.positions.shift();\n      }\n\n      // Need at least 2 positions to calculate velocity\n      if (this.positions.length < 2) {\n        return this.createVelocityData(0, false);\n      }\n      const prevPos = this.positions[this.positions.length - 2];\n      const currPos = this.positions[this.positions.length - 1];\n\n      // Calculate raw velocity\n      const rawVelocity = calculateVelocity(prevPos, currPos, this.config.calibration);\n\n      // Apply smoothing (exponential moving average)\n      const smoothedVelocity = this.applySmoothing(rawVelocity);\n\n      // Detect phase and rep completion\n      const {\n        phase,\n        repComplete\n      } = this.detectPhaseAndRep(smoothedVelocity, position.timestamp);\n      return this.createVelocityData(smoothedVelocity, repComplete);\n    }\n    applySmoothing(velocity) {\n      this.velocities.push(velocity);\n      if (this.velocities.length > 10) {\n        this.velocities.shift();\n      }\n\n      // Exponential smoothing\n      if (this.velocities.length === 1) return velocity;\n      const alpha = this.config.smoothingFactor;\n      const lastSmoothed = this.velocities[this.velocities.length - 2];\n      return alpha * velocity + (1 - alpha) * lastSmoothed;\n    }\n    detectPhaseAndRep(velocity, timestamp) {\n      const absVelocity = Math.abs(velocity);\n      let repComplete = false;\n\n      // Determine current phase\n      let newPhase;\n      if (absVelocity < STATIONARY_THRESHOLD) {\n        newPhase = 'stationary';\n      } else if (velocity > 0) {\n        newPhase = 'concentric';\n      } else {\n        newPhase = 'eccentric';\n      }\n\n      // Rep detection: transition from concentric to eccentric or stationary\n      if (this.currentPhase === 'concentric' && (newPhase === 'eccentric' || newPhase === 'stationary') && timestamp - this.lastRepTime > MIN_REP_DURATION) {\n        // Complete the rep\n        repComplete = true;\n        this.repCount++;\n        this.lastRepTime = timestamp;\n\n        // Calculate mean velocity for this rep\n        const repMeanVelocity = this.repVelocities.length > 0 ? this.repVelocities.reduce((a, b) => a + b, 0) / this.repVelocities.length : velocity;\n\n        // Store first rep velocity as baseline\n        if (this.firstRepMeanVelocity === null) {\n          this.firstRepMeanVelocity = repMeanVelocity;\n        }\n\n        // Reset for next rep\n        this.repVelocities = [];\n        this.repPeakVelocity = 0;\n      }\n\n      // Track velocities during concentric phase\n      if (newPhase === 'concentric') {\n        this.repVelocities.push(velocity);\n        if (velocity > this.repPeakVelocity) {\n          this.repPeakVelocity = velocity;\n        }\n        if (this.currentPhase !== 'concentric') {\n          this.repStartTime = timestamp;\n        }\n      }\n      this.currentPhase = newPhase;\n      return {\n        phase: newPhase,\n        repComplete\n      };\n    }\n    createVelocityData(velocity, repComplete) {\n      const meanVelocity = this.repVelocities.length > 0 ? this.repVelocities.reduce((a, b) => a + b, 0) / this.repVelocities.length : Math.abs(velocity);\n      const velocityDrop = this.firstRepMeanVelocity && this.firstRepMeanVelocity > 0 ? Math.max(0, (this.firstRepMeanVelocity - meanVelocity) / this.firstRepMeanVelocity * 100) : 0;\n      return {\n        instantVelocity: Math.abs(velocity),\n        meanVelocity: meanVelocity,\n        peakVelocity: this.repPeakVelocity,\n        phase: this.currentPhase,\n        repComplete,\n        velocityDrop: Math.round(velocityDrop * 10) / 10\n      };\n    }\n\n    /**\n     * Reset tracker state for new recording session\n     */\n    reset() {\n      this.positions = [];\n      this.velocities = [];\n      this.repVelocities = [];\n      this.firstRepMeanVelocity = null;\n      this.repCount = 0;\n      this.lastRepTime = 0;\n      this.currentPhase = 'stationary';\n      this.repStartTime = 0;\n      this.repPeakVelocity = 0;\n    }\n\n    /**\n     * Get current rep count\n     */\n    getRepCount() {\n      return this.repCount;\n    }\n\n    /**\n     * Get baseline velocity (first rep)\n     */\n    getBaselineVelocity() {\n      return this.firstRepMeanVelocity;\n    }\n  }\n\n  /**\n   * Simulated bar position generator for testing\n   * Generates realistic barbell movement patterns\n   */\n  class BarPositionSimulator {\n    repPhase = 0; // 0-1 within rep cycle\n    repNumber = 0;\n    constructor(loadKg, fatigueRate = 0.02 // 2% velocity loss per rep\n    ) {\n      this.loadKg = loadKg;\n      this.fatigueRate = fatigueRate;\n      this.startTime = Date.now();\n      // Higher loads = lower velocities (inverse relationship)\n      this.baseVelocity = Math.max(0.3, 1.2 - loadKg / 200);\n    }\n\n    /**\n     * Generate next simulated bar position\n     * Simulates a realistic squat/bench press movement pattern\n     */\n    getNextPosition() {\n      const now = Date.now();\n      const elapsed = now - this.startTime;\n\n      // Each rep takes about 2-3 seconds\n      const repDuration = 2500;\n      const totalPhase = elapsed % repDuration / repDuration;\n\n      // Detect new rep\n      const currentRep = Math.floor(elapsed / repDuration);\n      if (currentRep > this.repNumber) {\n        this.repNumber = currentRep;\n      }\n\n      // Apply fatigue to velocity\n      const fatigueMultiplier = Math.max(0.6, 1 - this.repNumber * this.fatigueRate);\n\n      // Movement pattern:\n      // 0.0 - 0.4: Eccentric (going down) - slower\n      // 0.4 - 0.5: Bottom position (stationary)\n      // 0.5 - 0.85: Concentric (going up) - faster\n      // 0.85 - 1.0: Top position (stationary)\n\n      let y;\n      let velocityFactor;\n      if (totalPhase < 0.4) {\n        // Eccentric phase - smooth descent\n        const eccentricProgress = totalPhase / 0.4;\n        y = 0.3 + eccentricProgress * 0.4; // 0.3 -> 0.7\n        velocityFactor = -0.5; // Slower descent\n      } else if (totalPhase < 0.5) {\n        // Bottom - slight pause\n        y = 0.7;\n        velocityFactor = 0;\n      } else if (totalPhase < 0.85) {\n        // Concentric phase - explosive ascent\n        const concentricProgress = (totalPhase - 0.5) / 0.35;\n        y = 0.7 - concentricProgress * 0.4; // 0.7 -> 0.3\n        // Velocity peaks in middle of concentric\n        const velocityCurve = Math.sin(concentricProgress * Math.PI);\n        velocityFactor = velocityCurve * this.baseVelocity * fatigueMultiplier;\n      } else {\n        // Top - lockout\n        y = 0.3;\n        velocityFactor = 0;\n      }\n\n      // Add small random noise for realism\n      const noise = (Math.random() - 0.5) * 0.01;\n      return {\n        x: 0.5 + noise,\n        // Centered with slight horizontal sway\n        y: y + noise,\n        confidence: 0.85 + Math.random() * 0.15,\n        // 0.85-1.0\n        timestamp: now\n      };\n    }\n\n    /**\n     * Reset simulator for new session\n     */\n    reset() {\n      this.startTime = Date.now();\n      this.repPhase = 0;\n      this.repNumber = 0;\n    }\n  }\n\n  /**\n   * Default tracker configuration\n   */\n  function createDefaultConfig(calibration) {\n    return {\n      calibration: {\n        heightCm: calibration.heightCm || 100,\n        distanceCm: calibration.distanceCm || 150,\n        fov: calibration.fov || 60,\n        frameHeight: calibration.frameHeight || 1920,\n        frameWidth: calibration.frameWidth || 1080\n      },\n      velocityThreshold: 0.1,\n      repDetectionWindow: 300,\n      smoothingFactor: 0.3\n    };\n  }\n});","lineCount":334,"map":[[7,2,58,0,"exports"],[7,9,58,0],[7,10,58,0,"pixelsToMeters"],[7,24,58,0],[7,27,58,0,"pixelsToMeters"],[7,41,58,0],[8,2,74,0,"exports"],[8,9,74,0],[8,10,74,0,"calculateVelocity"],[8,27,74,0],[8,30,74,0,"calculateVelocity"],[8,47,74,0],[9,2,96,0,"Object"],[9,8,96,0],[9,9,96,0,"defineProperty"],[9,23,96,0],[9,24,96,0,"exports"],[9,31,96,0],[10,4,96,0,"enumerable"],[10,14,96,0],[11,4,96,0,"get"],[11,7,96,0],[11,18,96,0,"get"],[11,19,96,0],[12,6,96,0],[12,13,96,0,"BarTrackerState"],[12,28,96,0],[13,4,96,0],[14,2,96,0],[15,2,264,0,"Object"],[15,8,264,0],[15,9,264,0,"defineProperty"],[15,23,264,0],[15,24,264,0,"exports"],[15,31,264,0],[16,4,264,0,"enumerable"],[16,14,264,0],[17,4,264,0,"get"],[17,7,264,0],[17,18,264,0,"get"],[17,19,264,0],[18,6,264,0],[18,13,264,0,"BarPositionSimulator"],[18,33,264,0],[19,4,264,0],[20,2,264,0],[21,2,355,0,"exports"],[21,9,355,0],[21,10,355,0,"createDefaultConfig"],[21,29,355,0],[21,32,355,0,"createDefaultConfig"],[21,51,355,0],[22,2,1,0],[23,0,2,0],[24,0,3,0],[25,0,4,0],[26,0,5,0],[27,0,6,0],[28,0,7,0],[29,0,8,0],[30,0,9,0],[31,0,10,0],[32,0,11,0],[33,0,12,0],[34,0,13,0],[35,0,14,0],[36,0,15,0],[37,0,16,0],[39,2,49,0],[40,2,50,0],[40,8,50,6,"GRAVITY"],[40,15,50,13],[40,18,50,16],[40,22,50,20],[40,23,50,21],[40,24,50,22],[41,2,51,0],[41,8,51,6,"MIN_REP_DURATION"],[41,24,51,22],[41,27,51,25],[41,30,51,28],[41,31,51,29],[41,32,51,30],[42,2,52,0],[42,8,52,6,"STATIONARY_THRESHOLD"],[42,28,52,26],[42,31,52,29],[42,35,52,33],[42,36,52,34],[42,37,52,35],[44,2,54,0],[45,0,55,0],[46,0,56,0],[47,0,57,0],[48,2,58,7],[48,11,58,16,"pixelsToMeters"],[48,25,58,30,"pixelsToMeters"],[48,26,59,2,"pixelDisplacement"],[48,43,59,27],[48,45,60,2,"calibration"],[48,56,60,32],[48,58,61,10],[49,4,62,2],[50,4,63,2],[50,10,63,8,"focalLengthPixels"],[50,27,63,25],[50,30,63,28,"calibration"],[50,41,63,39],[50,42,63,40,"frameHeight"],[50,53,63,51],[50,57,63,55],[50,58,63,56],[50,61,63,59,"Math"],[50,65,63,63],[50,66,63,64,"tan"],[50,69,63,67],[50,70,63,69,"calibration"],[50,81,63,80],[50,82,63,81,"fov"],[50,85,63,84],[50,88,63,87,"Math"],[50,92,63,91],[50,93,63,92,"PI"],[50,95,63,94],[50,98,63,98],[50,101,63,101],[50,102,63,102],[50,103,63,103],[52,4,65,2],[53,4,66,2],[53,10,66,8,"realDisplacement"],[53,26,66,24],[53,29,66,28,"pixelDisplacement"],[53,46,66,45],[53,49,66,48,"calibration"],[53,60,66,59],[53,61,66,60,"distanceCm"],[53,71,66,70],[53,75,66,75,"focalLengthPixels"],[53,92,66,92],[53,95,66,95],[53,98,66,98],[53,99,66,99],[54,4,68,2],[54,11,68,9,"realDisplacement"],[54,27,68,25],[55,2,69,0],[57,2,71,0],[58,0,72,0],[59,0,73,0],[60,2,74,7],[60,11,74,16,"calculateVelocity"],[60,28,74,33,"calculateVelocity"],[60,29,75,2,"pos1"],[60,33,75,19],[60,35,76,2,"pos2"],[60,39,76,19],[60,41,77,2,"calibration"],[60,52,77,32],[60,54,78,10],[61,4,79,2],[61,10,79,8,"timeDelta"],[61,19,79,17],[61,22,79,20],[61,23,79,21,"pos2"],[61,27,79,25],[61,28,79,26,"timestamp"],[61,37,79,35],[61,40,79,38,"pos1"],[61,44,79,42],[61,45,79,43,"timestamp"],[61,54,79,52],[61,58,79,56],[61,62,79,60],[61,63,79,61],[61,64,79,62],[63,4,81,2],[63,8,81,6,"timeDelta"],[63,17,81,15],[63,21,81,19],[63,22,81,20],[63,24,81,22],[63,31,81,29],[63,32,81,30],[65,4,83,2],[66,4,84,2],[66,10,84,8,"pixelDelta"],[66,20,84,18],[66,23,84,21],[66,24,84,22,"pos2"],[66,28,84,26],[66,29,84,27,"y"],[66,30,84,28],[66,33,84,31,"pos1"],[66,37,84,35],[66,38,84,36,"y"],[66,39,84,37],[66,43,84,41,"calibration"],[66,54,84,52],[66,55,84,53,"frameHeight"],[66,66,84,64],[67,4,85,2],[67,10,85,8,"meterDelta"],[67,20,85,18],[67,23,85,21,"pixelsToMeters"],[67,37,85,35],[67,38,85,36,"pixelDelta"],[67,48,85,46],[67,50,85,48,"calibration"],[67,61,85,59],[67,62,85,60],[69,4,87,2],[70,4,88,2],[71,4,89,2],[71,11,89,9],[71,12,89,10,"meterDelta"],[71,22,89,20],[71,25,89,23,"timeDelta"],[71,34,89,32],[72,2,90,0],[74,2,92,0],[75,0,93,0],[76,0,94,0],[77,0,95,0],[78,2,96,7],[78,8,96,13,"BarTrackerState"],[78,23,96,28],[78,24,96,29],[79,4,97,10,"positions"],[79,13,97,19],[79,16,97,37],[79,18,97,39],[80,4,98,10,"velocities"],[80,14,98,20],[80,17,98,33],[80,19,98,35],[81,4,99,10,"repVelocities"],[81,17,99,23],[81,20,99,36],[81,22,99,38],[82,4,100,10,"firstRepMeanVelocity"],[82,24,100,30],[82,27,100,48],[82,31,100,52],[83,4,101,10,"repCount"],[83,12,101,18],[83,15,101,29],[83,16,101,30],[84,4,102,10,"lastRepTime"],[84,15,102,21],[84,18,102,32],[84,19,102,33],[85,4,103,10,"currentPhase"],[85,16,103,22],[85,19,103,68],[85,31,103,80],[86,4,104,10,"repStartTime"],[86,16,104,22],[86,19,104,33],[86,20,104,34],[87,4,105,10,"repPeakVelocity"],[87,19,105,25],[87,22,105,36],[87,23,105,37],[88,4,107,2,"constructor"],[88,15,107,13,"constructor"],[88,16,107,22,"config"],[88,22,107,43],[88,24,107,45],[89,6,107,45],[89,11,107,22,"config"],[89,17,107,43],[89,20,107,22,"config"],[89,26,107,43],[90,4,107,46],[92,4,109,2],[93,0,110,0],[94,0,111,0],[95,4,112,2,"processPosition"],[95,19,112,17,"processPosition"],[95,20,112,18,"position"],[95,28,112,39],[95,30,112,55],[96,6,113,4],[96,10,113,8],[96,11,113,9,"positions"],[96,20,113,18],[96,21,113,19,"push"],[96,25,113,23],[96,26,113,24,"position"],[96,34,113,32],[96,35,113,33],[98,6,115,4],[99,6,116,4],[99,10,116,8],[99,14,116,12],[99,15,116,13,"positions"],[99,24,116,22],[99,25,116,23,"length"],[99,31,116,29],[99,34,116,32],[99,36,116,34],[99,38,116,36],[100,8,117,6],[100,12,117,10],[100,13,117,11,"positions"],[100,22,117,20],[100,23,117,21,"shift"],[100,28,117,26],[100,29,117,27],[100,30,117,28],[101,6,118,4],[103,6,120,4],[104,6,121,4],[104,10,121,8],[104,14,121,12],[104,15,121,13,"positions"],[104,24,121,22],[104,25,121,23,"length"],[104,31,121,29],[104,34,121,32],[104,35,121,33],[104,37,121,35],[105,8,122,6],[105,15,122,13],[105,19,122,17],[105,20,122,18,"createVelocityData"],[105,38,122,36],[105,39,122,37],[105,40,122,38],[105,42,122,40],[105,47,122,45],[105,48,122,46],[106,6,123,4],[107,6,125,4],[107,12,125,10,"prevPos"],[107,19,125,17],[107,22,125,20],[107,26,125,24],[107,27,125,25,"positions"],[107,36,125,34],[107,37,125,35],[107,41,125,39],[107,42,125,40,"positions"],[107,51,125,49],[107,52,125,50,"length"],[107,58,125,56],[107,61,125,59],[107,62,125,60],[107,63,125,61],[108,6,126,4],[108,12,126,10,"currPos"],[108,19,126,17],[108,22,126,20],[108,26,126,24],[108,27,126,25,"positions"],[108,36,126,34],[108,37,126,35],[108,41,126,39],[108,42,126,40,"positions"],[108,51,126,49],[108,52,126,50,"length"],[108,58,126,56],[108,61,126,59],[108,62,126,60],[108,63,126,61],[110,6,128,4],[111,6,129,4],[111,12,129,10,"rawVelocity"],[111,23,129,21],[111,26,129,24,"calculateVelocity"],[111,43,129,41],[111,44,129,42,"prevPos"],[111,51,129,49],[111,53,129,51,"currPos"],[111,60,129,58],[111,62,129,60],[111,66,129,64],[111,67,129,65,"config"],[111,73,129,71],[111,74,129,72,"calibration"],[111,85,129,83],[111,86,129,84],[113,6,131,4],[114,6,132,4],[114,12,132,10,"smoothedVelocity"],[114,28,132,26],[114,31,132,29],[114,35,132,33],[114,36,132,34,"applySmoothing"],[114,50,132,48],[114,51,132,49,"rawVelocity"],[114,62,132,60],[114,63,132,61],[116,6,134,4],[117,6,135,4],[117,12,135,10],[118,8,135,12,"phase"],[118,13,135,17],[119,8,135,19,"repComplete"],[120,6,135,31],[120,7,135,32],[120,10,135,35],[120,14,135,39],[120,15,135,40,"detectPhaseAndRep"],[120,32,135,57],[120,33,135,58,"smoothedVelocity"],[120,49,135,74],[120,51,135,76,"position"],[120,59,135,84],[120,60,135,85,"timestamp"],[120,69,135,94],[120,70,135,95],[121,6,137,4],[121,13,137,11],[121,17,137,15],[121,18,137,16,"createVelocityData"],[121,36,137,34],[121,37,137,35,"smoothedVelocity"],[121,53,137,51],[121,55,137,53,"repComplete"],[121,66,137,64],[121,67,137,65],[122,4,138,2],[123,4,140,10,"applySmoothing"],[123,18,140,24,"applySmoothing"],[123,19,140,25,"velocity"],[123,27,140,41],[123,29,140,51],[124,6,141,4],[124,10,141,8],[124,11,141,9,"velocities"],[124,21,141,19],[124,22,141,20,"push"],[124,26,141,24],[124,27,141,25,"velocity"],[124,35,141,33],[124,36,141,34],[125,6,143,4],[125,10,143,8],[125,14,143,12],[125,15,143,13,"velocities"],[125,25,143,23],[125,26,143,24,"length"],[125,32,143,30],[125,35,143,33],[125,37,143,35],[125,39,143,37],[126,8,144,6],[126,12,144,10],[126,13,144,11,"velocities"],[126,23,144,21],[126,24,144,22,"shift"],[126,29,144,27],[126,30,144,28],[126,31,144,29],[127,6,145,4],[129,6,147,4],[130,6,148,4],[130,10,148,8],[130,14,148,12],[130,15,148,13,"velocities"],[130,25,148,23],[130,26,148,24,"length"],[130,32,148,30],[130,37,148,35],[130,38,148,36],[130,40,148,38],[130,47,148,45,"velocity"],[130,55,148,53],[131,6,150,4],[131,12,150,10,"alpha"],[131,17,150,15],[131,20,150,18],[131,24,150,22],[131,25,150,23,"config"],[131,31,150,29],[131,32,150,30,"smoothingFactor"],[131,47,150,45],[132,6,151,4],[132,12,151,10,"lastSmoothed"],[132,24,151,22],[132,27,151,25],[132,31,151,29],[132,32,151,30,"velocities"],[132,42,151,40],[132,43,151,41],[132,47,151,45],[132,48,151,46,"velocities"],[132,58,151,56],[132,59,151,57,"length"],[132,65,151,63],[132,68,151,66],[132,69,151,67],[132,70,151,68],[133,6,152,4],[133,13,152,11,"alpha"],[133,18,152,16],[133,21,152,19,"velocity"],[133,29,152,27],[133,32,152,30],[133,33,152,31],[133,34,152,32],[133,37,152,35,"alpha"],[133,42,152,40],[133,46,152,44,"lastSmoothed"],[133,58,152,56],[134,4,153,2],[135,4,155,10,"detectPhaseAndRep"],[135,21,155,27,"detectPhaseAndRep"],[135,22,155,28,"velocity"],[135,30,155,44],[135,32,155,46,"timestamp"],[135,41,155,63],[135,43,155,141],[136,6,156,4],[136,12,156,10,"absVelocity"],[136,23,156,21],[136,26,156,24,"Math"],[136,30,156,28],[136,31,156,29,"abs"],[136,34,156,32],[136,35,156,33,"velocity"],[136,43,156,41],[136,44,156,42],[137,6,157,4],[137,10,157,8,"repComplete"],[137,21,157,19],[137,24,157,22],[137,29,157,27],[139,6,159,4],[140,6,160,4],[140,10,160,8,"newPhase"],[140,18,160,59],[141,6,161,4],[141,10,161,8,"absVelocity"],[141,21,161,19],[141,24,161,22,"STATIONARY_THRESHOLD"],[141,44,161,42],[141,46,161,44],[142,8,162,6,"newPhase"],[142,16,162,14],[142,19,162,17],[142,31,162,29],[143,6,163,4],[143,7,163,5],[143,13,163,11],[143,17,163,15,"velocity"],[143,25,163,23],[143,28,163,26],[143,29,163,27],[143,31,163,29],[144,8,164,6,"newPhase"],[144,16,164,14],[144,19,164,17],[144,31,164,29],[145,6,165,4],[145,7,165,5],[145,13,165,11],[146,8,166,6,"newPhase"],[146,16,166,14],[146,19,166,17],[146,30,166,28],[147,6,167,4],[149,6,169,4],[150,6,170,4],[150,10,170,8],[150,14,170,12],[150,15,170,13,"currentPhase"],[150,27,170,25],[150,32,170,30],[150,44,170,42],[150,49,171,9,"newPhase"],[150,57,171,17],[150,62,171,22],[150,73,171,33],[150,77,171,37,"newPhase"],[150,85,171,45],[150,90,171,50],[150,102,171,62],[150,103,171,63],[150,107,172,8,"timestamp"],[150,116,172,17],[150,119,172,20],[150,123,172,24],[150,124,172,25,"lastRepTime"],[150,135,172,36],[150,138,172,39,"MIN_REP_DURATION"],[150,154,172,55],[150,156,172,57],[151,8,174,6],[152,8,175,6,"repComplete"],[152,19,175,17],[152,22,175,20],[152,26,175,24],[153,8,176,6],[153,12,176,10],[153,13,176,11,"repCount"],[153,21,176,19],[153,23,176,21],[154,8,177,6],[154,12,177,10],[154,13,177,11,"lastRepTime"],[154,24,177,22],[154,27,177,25,"timestamp"],[154,36,177,34],[156,8,179,6],[157,8,180,6],[157,14,180,12,"repMeanVelocity"],[157,29,180,27],[157,32,180,30],[157,36,180,34],[157,37,180,35,"repVelocities"],[157,50,180,48],[157,51,180,49,"length"],[157,57,180,55],[157,60,180,58],[157,61,180,59],[157,64,181,10],[157,68,181,14],[157,69,181,15,"repVelocities"],[157,82,181,28],[157,83,181,29,"reduce"],[157,89,181,35],[157,90,181,36],[157,91,181,37,"a"],[157,92,181,38],[157,94,181,40,"b"],[157,95,181,41],[157,100,181,46,"a"],[157,101,181,47],[157,104,181,50,"b"],[157,105,181,51],[157,107,181,53],[157,108,181,54],[157,109,181,55],[157,112,181,58],[157,116,181,62],[157,117,181,63,"repVelocities"],[157,130,181,76],[157,131,181,77,"length"],[157,137,181,83],[157,140,182,10,"velocity"],[157,148,182,18],[159,8,184,6],[160,8,185,6],[160,12,185,10],[160,16,185,14],[160,17,185,15,"firstRepMeanVelocity"],[160,37,185,35],[160,42,185,40],[160,46,185,44],[160,48,185,46],[161,10,186,8],[161,14,186,12],[161,15,186,13,"firstRepMeanVelocity"],[161,35,186,33],[161,38,186,36,"repMeanVelocity"],[161,53,186,51],[162,8,187,6],[164,8,189,6],[165,8,190,6],[165,12,190,10],[165,13,190,11,"repVelocities"],[165,26,190,24],[165,29,190,27],[165,31,190,29],[166,8,191,6],[166,12,191,10],[166,13,191,11,"repPeakVelocity"],[166,28,191,26],[166,31,191,29],[166,32,191,30],[167,6,192,4],[169,6,194,4],[170,6,195,4],[170,10,195,8,"newPhase"],[170,18,195,16],[170,23,195,21],[170,35,195,33],[170,37,195,35],[171,8,196,6],[171,12,196,10],[171,13,196,11,"repVelocities"],[171,26,196,24],[171,27,196,25,"push"],[171,31,196,29],[171,32,196,30,"velocity"],[171,40,196,38],[171,41,196,39],[172,8,197,6],[172,12,197,10,"velocity"],[172,20,197,18],[172,23,197,21],[172,27,197,25],[172,28,197,26,"repPeakVelocity"],[172,43,197,41],[172,45,197,43],[173,10,198,8],[173,14,198,12],[173,15,198,13,"repPeakVelocity"],[173,30,198,28],[173,33,198,31,"velocity"],[173,41,198,39],[174,8,199,6],[175,8,201,6],[175,12,201,10],[175,16,201,14],[175,17,201,15,"currentPhase"],[175,29,201,27],[175,34,201,32],[175,46,201,44],[175,48,201,46],[176,10,202,8],[176,14,202,12],[176,15,202,13,"repStartTime"],[176,27,202,25],[176,30,202,28,"timestamp"],[176,39,202,37],[177,8,203,6],[178,6,204,4],[179,6,206,4],[179,10,206,8],[179,11,206,9,"currentPhase"],[179,23,206,21],[179,26,206,24,"newPhase"],[179,34,206,32],[180,6,208,4],[180,13,208,11],[181,8,208,13,"phase"],[181,13,208,18],[181,15,208,20,"newPhase"],[181,23,208,28],[182,8,208,30,"repComplete"],[183,6,208,42],[183,7,208,43],[184,4,209,2],[185,4,211,10,"createVelocityData"],[185,22,211,28,"createVelocityData"],[185,23,211,29,"velocity"],[185,31,211,45],[185,33,211,47,"repComplete"],[185,44,211,67],[185,46,211,83],[186,6,212,4],[186,12,212,10,"meanVelocity"],[186,24,212,22],[186,27,212,25],[186,31,212,29],[186,32,212,30,"repVelocities"],[186,45,212,43],[186,46,212,44,"length"],[186,52,212,50],[186,55,212,53],[186,56,212,54],[186,59,213,8],[186,63,213,12],[186,64,213,13,"repVelocities"],[186,77,213,26],[186,78,213,27,"reduce"],[186,84,213,33],[186,85,213,34],[186,86,213,35,"a"],[186,87,213,36],[186,89,213,38,"b"],[186,90,213,39],[186,95,213,44,"a"],[186,96,213,45],[186,99,213,48,"b"],[186,100,213,49],[186,102,213,51],[186,103,213,52],[186,104,213,53],[186,107,213,56],[186,111,213,60],[186,112,213,61,"repVelocities"],[186,125,213,74],[186,126,213,75,"length"],[186,132,213,81],[186,135,214,8,"Math"],[186,139,214,12],[186,140,214,13,"abs"],[186,143,214,16],[186,144,214,17,"velocity"],[186,152,214,25],[186,153,214,26],[187,6,216,4],[187,12,216,10,"velocityDrop"],[187,24,216,22],[187,27,216,25],[187,31,216,29],[187,32,216,30,"firstRepMeanVelocity"],[187,52,216,50],[187,56,216,54],[187,60,216,58],[187,61,216,59,"firstRepMeanVelocity"],[187,81,216,79],[187,84,216,82],[187,85,216,83],[187,88,217,8,"Math"],[187,92,217,12],[187,93,217,13,"max"],[187,96,217,16],[187,97,217,17],[187,98,217,18],[187,100,217,21],[187,101,217,22],[187,105,217,26],[187,106,217,27,"firstRepMeanVelocity"],[187,126,217,47],[187,129,217,50,"meanVelocity"],[187,141,217,62],[187,145,217,66],[187,149,217,70],[187,150,217,71,"firstRepMeanVelocity"],[187,170,217,91],[187,173,217,95],[187,176,217,98],[187,177,217,99],[187,180,218,8],[187,181,218,9],[188,6,220,4],[188,13,220,11],[189,8,221,6,"instantVelocity"],[189,23,221,21],[189,25,221,23,"Math"],[189,29,221,27],[189,30,221,28,"abs"],[189,33,221,31],[189,34,221,32,"velocity"],[189,42,221,40],[189,43,221,41],[190,8,222,6,"meanVelocity"],[190,20,222,18],[190,22,222,20,"meanVelocity"],[190,34,222,32],[191,8,223,6,"peakVelocity"],[191,20,223,18],[191,22,223,20],[191,26,223,24],[191,27,223,25,"repPeakVelocity"],[191,42,223,40],[192,8,224,6,"phase"],[192,13,224,11],[192,15,224,13],[192,19,224,17],[192,20,224,18,"currentPhase"],[192,32,224,30],[193,8,225,6,"repComplete"],[193,19,225,17],[194,8,226,6,"velocityDrop"],[194,20,226,18],[194,22,226,20,"Math"],[194,26,226,24],[194,27,226,25,"round"],[194,32,226,30],[194,33,226,31,"velocityDrop"],[194,45,226,43],[194,48,226,46],[194,50,226,48],[194,51,226,49],[194,54,226,52],[195,6,227,4],[195,7,227,5],[196,4,228,2],[198,4,230,2],[199,0,231,0],[200,0,232,0],[201,4,233,2,"reset"],[201,9,233,7,"reset"],[201,10,233,7],[201,12,233,16],[202,6,234,4],[202,10,234,8],[202,11,234,9,"positions"],[202,20,234,18],[202,23,234,21],[202,25,234,23],[203,6,235,4],[203,10,235,8],[203,11,235,9,"velocities"],[203,21,235,19],[203,24,235,22],[203,26,235,24],[204,6,236,4],[204,10,236,8],[204,11,236,9,"repVelocities"],[204,24,236,22],[204,27,236,25],[204,29,236,27],[205,6,237,4],[205,10,237,8],[205,11,237,9,"firstRepMeanVelocity"],[205,31,237,29],[205,34,237,32],[205,38,237,36],[206,6,238,4],[206,10,238,8],[206,11,238,9,"repCount"],[206,19,238,17],[206,22,238,20],[206,23,238,21],[207,6,239,4],[207,10,239,8],[207,11,239,9,"lastRepTime"],[207,22,239,20],[207,25,239,23],[207,26,239,24],[208,6,240,4],[208,10,240,8],[208,11,240,9,"currentPhase"],[208,23,240,21],[208,26,240,24],[208,38,240,36],[209,6,241,4],[209,10,241,8],[209,11,241,9,"repStartTime"],[209,23,241,21],[209,26,241,24],[209,27,241,25],[210,6,242,4],[210,10,242,8],[210,11,242,9,"repPeakVelocity"],[210,26,242,24],[210,29,242,27],[210,30,242,28],[211,4,243,2],[213,4,245,2],[214,0,246,0],[215,0,247,0],[216,4,248,2,"getRepCount"],[216,15,248,13,"getRepCount"],[216,16,248,13],[216,18,248,24],[217,6,249,4],[217,13,249,11],[217,17,249,15],[217,18,249,16,"repCount"],[217,26,249,24],[218,4,250,2],[220,4,252,2],[221,0,253,0],[222,0,254,0],[223,4,255,2,"getBaselineVelocity"],[223,23,255,21,"getBaselineVelocity"],[223,24,255,21],[223,26,255,39],[224,6,256,4],[224,13,256,11],[224,17,256,15],[224,18,256,16,"firstRepMeanVelocity"],[224,38,256,36],[225,4,257,2],[226,2,258,0],[228,2,260,0],[229,0,261,0],[230,0,262,0],[231,0,263,0],[232,2,264,7],[232,8,264,13,"BarPositionSimulator"],[232,28,264,33],[232,29,264,34],[233,4,266,10,"repPhase"],[233,12,266,18],[233,15,266,29],[233,16,266,30],[233,17,266,31],[233,18,266,32],[234,4,267,10,"repNumber"],[234,13,267,19],[234,16,267,30],[234,17,267,31],[235,4,270,2,"constructor"],[235,15,270,13,"constructor"],[235,16,271,12,"loadKg"],[235,22,271,26],[235,24,272,12,"fatigueRate"],[235,35,272,31],[235,38,272,34],[235,42,272,38],[235,43,272,39],[236,4,272,39],[236,6,273,4],[237,6,273,4],[237,11,271,12,"loadKg"],[237,17,271,26],[237,20,271,12,"loadKg"],[237,26,271,26],[238,6,271,26],[238,11,272,12,"fatigueRate"],[238,22,272,31],[238,25,272,12,"fatigueRate"],[238,36,272,31],[239,6,274,4],[239,10,274,8],[239,11,274,9,"startTime"],[239,20,274,18],[239,23,274,21,"Date"],[239,27,274,25],[239,28,274,26,"now"],[239,31,274,29],[239,32,274,30],[239,33,274,31],[240,6,275,4],[241,6,276,4],[241,10,276,8],[241,11,276,9,"baseVelocity"],[241,23,276,21],[241,26,276,24,"Math"],[241,30,276,28],[241,31,276,29,"max"],[241,34,276,32],[241,35,276,33],[241,38,276,36],[241,40,276,38],[241,43,276,41],[241,46,276,45,"loadKg"],[241,52,276,51],[241,55,276,54],[241,58,276,58],[241,59,276,59],[242,4,277,2],[244,4,279,2],[245,0,280,0],[246,0,281,0],[247,0,282,0],[248,4,283,2,"getNextPosition"],[248,19,283,17,"getNextPosition"],[248,20,283,17],[248,22,283,33],[249,6,284,4],[249,12,284,10,"now"],[249,15,284,13],[249,18,284,16,"Date"],[249,22,284,20],[249,23,284,21,"now"],[249,26,284,24],[249,27,284,25],[249,28,284,26],[250,6,285,4],[250,12,285,10,"elapsed"],[250,19,285,17],[250,22,285,20,"now"],[250,25,285,23],[250,28,285,26],[250,32,285,30],[250,33,285,31,"startTime"],[250,42,285,40],[252,6,287,4],[253,6,288,4],[253,12,288,10,"repDuration"],[253,23,288,21],[253,26,288,24],[253,30,288,28],[254,6,289,4],[254,12,289,10,"totalPhase"],[254,22,289,20],[254,25,289,24,"elapsed"],[254,32,289,31],[254,35,289,34,"repDuration"],[254,46,289,45],[254,49,289,49,"repDuration"],[254,60,289,60],[256,6,291,4],[257,6,292,4],[257,12,292,10,"currentRep"],[257,22,292,20],[257,25,292,23,"Math"],[257,29,292,27],[257,30,292,28,"floor"],[257,35,292,33],[257,36,292,34,"elapsed"],[257,43,292,41],[257,46,292,44,"repDuration"],[257,57,292,55],[257,58,292,56],[258,6,293,4],[258,10,293,8,"currentRep"],[258,20,293,18],[258,23,293,21],[258,27,293,25],[258,28,293,26,"repNumber"],[258,37,293,35],[258,39,293,37],[259,8,294,6],[259,12,294,10],[259,13,294,11,"repNumber"],[259,22,294,20],[259,25,294,23,"currentRep"],[259,35,294,33],[260,6,295,4],[262,6,297,4],[263,6,298,4],[263,12,298,10,"fatigueMultiplier"],[263,29,298,27],[263,32,298,30,"Math"],[263,36,298,34],[263,37,298,35,"max"],[263,40,298,38],[263,41,298,39],[263,44,298,42],[263,46,298,44],[263,47,298,45],[263,50,298,49],[263,54,298,53],[263,55,298,54,"repNumber"],[263,64,298,63],[263,67,298,66],[263,71,298,70],[263,72,298,71,"fatigueRate"],[263,83,298,83],[263,84,298,84],[265,6,300,4],[266,6,301,4],[267,6,302,4],[268,6,303,4],[269,6,304,4],[271,6,306,4],[271,10,306,8,"y"],[271,11,306,17],[272,6,307,4],[272,10,307,8,"velocityFactor"],[272,24,307,30],[273,6,309,4],[273,10,309,8,"totalPhase"],[273,20,309,18],[273,23,309,21],[273,26,309,24],[273,28,309,26],[274,8,310,6],[275,8,311,6],[275,14,311,12,"eccentricProgress"],[275,31,311,29],[275,34,311,32,"totalPhase"],[275,44,311,42],[275,47,311,45],[275,50,311,48],[276,8,312,6,"y"],[276,9,312,7],[276,12,312,10],[276,15,312,13],[276,18,312,17,"eccentricProgress"],[276,35,312,34],[276,38,312,37],[276,41,312,41],[276,42,312,42],[276,43,312,43],[277,8,313,6,"velocityFactor"],[277,22,313,20],[277,25,313,23],[277,26,313,24],[277,29,313,27],[277,30,313,28],[277,31,313,29],[278,6,314,4],[278,7,314,5],[278,13,314,11],[278,17,314,15,"totalPhase"],[278,27,314,25],[278,30,314,28],[278,33,314,31],[278,35,314,33],[279,8,315,6],[280,8,316,6,"y"],[280,9,316,7],[280,12,316,10],[280,15,316,13],[281,8,317,6,"velocityFactor"],[281,22,317,20],[281,25,317,23],[281,26,317,24],[282,6,318,4],[282,7,318,5],[282,13,318,11],[282,17,318,15,"totalPhase"],[282,27,318,25],[282,30,318,28],[282,34,318,32],[282,36,318,34],[283,8,319,6],[284,8,320,6],[284,14,320,12,"concentricProgress"],[284,32,320,30],[284,35,320,33],[284,36,320,34,"totalPhase"],[284,46,320,44],[284,49,320,47],[284,52,320,50],[284,56,320,54],[284,60,320,58],[285,8,321,6,"y"],[285,9,321,7],[285,12,321,10],[285,15,321,13],[285,18,321,17,"concentricProgress"],[285,36,321,35],[285,39,321,38],[285,42,321,42],[285,43,321,43],[285,44,321,44],[286,8,322,6],[287,8,323,6],[287,14,323,12,"velocityCurve"],[287,27,323,25],[287,30,323,28,"Math"],[287,34,323,32],[287,35,323,33,"sin"],[287,38,323,36],[287,39,323,37,"concentricProgress"],[287,57,323,55],[287,60,323,58,"Math"],[287,64,323,62],[287,65,323,63,"PI"],[287,67,323,65],[287,68,323,66],[288,8,324,6,"velocityFactor"],[288,22,324,20],[288,25,324,23,"velocityCurve"],[288,38,324,36],[288,41,324,39],[288,45,324,43],[288,46,324,44,"baseVelocity"],[288,58,324,56],[288,61,324,59,"fatigueMultiplier"],[288,78,324,76],[289,6,325,4],[289,7,325,5],[289,13,325,11],[290,8,326,6],[291,8,327,6,"y"],[291,9,327,7],[291,12,327,10],[291,15,327,13],[292,8,328,6,"velocityFactor"],[292,22,328,20],[292,25,328,23],[292,26,328,24],[293,6,329,4],[295,6,331,4],[296,6,332,4],[296,12,332,10,"noise"],[296,17,332,15],[296,20,332,18],[296,21,332,19,"Math"],[296,25,332,23],[296,26,332,24,"random"],[296,32,332,30],[296,33,332,31],[296,34,332,32],[296,37,332,35],[296,40,332,38],[296,44,332,42],[296,48,332,46],[297,6,334,4],[297,13,334,11],[298,8,335,6,"x"],[298,9,335,7],[298,11,335,9],[298,14,335,12],[298,17,335,15,"noise"],[298,22,335,20],[299,8,335,22],[300,8,336,6,"y"],[300,9,336,7],[300,11,336,9,"y"],[300,12,336,10],[300,15,336,13,"noise"],[300,20,336,18],[301,8,337,6,"confidence"],[301,18,337,16],[301,20,337,18],[301,24,337,22],[301,27,337,26,"Math"],[301,31,337,30],[301,32,337,31,"random"],[301,38,337,37],[301,39,337,38],[301,40,337,39],[301,43,337,42],[301,47,337,47],[302,8,337,49],[303,8,338,6,"timestamp"],[303,17,338,15],[303,19,338,17,"now"],[304,6,339,4],[304,7,339,5],[305,4,340,2],[307,4,342,2],[308,0,343,0],[309,0,344,0],[310,4,345,2,"reset"],[310,9,345,7,"reset"],[310,10,345,7],[310,12,345,16],[311,6,346,4],[311,10,346,8],[311,11,346,9,"startTime"],[311,20,346,18],[311,23,346,21,"Date"],[311,27,346,25],[311,28,346,26,"now"],[311,31,346,29],[311,32,346,30],[311,33,346,31],[312,6,347,4],[312,10,347,8],[312,11,347,9,"repPhase"],[312,19,347,17],[312,22,347,20],[312,23,347,21],[313,6,348,4],[313,10,348,8],[313,11,348,9,"repNumber"],[313,20,348,18],[313,23,348,21],[313,24,348,22],[314,4,349,2],[315,2,350,0],[317,2,352,0],[318,0,353,0],[319,0,354,0],[320,2,355,7],[320,11,355,16,"createDefaultConfig"],[320,30,355,35,"createDefaultConfig"],[320,31,355,36,"calibration"],[320,42,355,75],[320,44,355,92],[321,4,356,2],[321,11,356,9],[322,6,357,4,"calibration"],[322,17,357,15],[322,19,357,17],[323,8,358,6,"heightCm"],[323,16,358,14],[323,18,358,16,"calibration"],[323,29,358,27],[323,30,358,28,"heightCm"],[323,38,358,36],[323,42,358,40],[323,45,358,43],[324,8,359,6,"distanceCm"],[324,18,359,16],[324,20,359,18,"calibration"],[324,31,359,29],[324,32,359,30,"distanceCm"],[324,42,359,40],[324,46,359,44],[324,49,359,47],[325,8,360,6,"fov"],[325,11,360,9],[325,13,360,11,"calibration"],[325,24,360,22],[325,25,360,23,"fov"],[325,28,360,26],[325,32,360,30],[325,34,360,32],[326,8,361,6,"frameHeight"],[326,19,361,17],[326,21,361,19,"calibration"],[326,32,361,30],[326,33,361,31,"frameHeight"],[326,44,361,42],[326,48,361,46],[326,52,361,50],[327,8,362,6,"frameWidth"],[327,18,362,16],[327,20,362,18,"calibration"],[327,31,362,29],[327,32,362,30,"frameWidth"],[327,42,362,40],[327,46,362,44],[328,6,363,4],[328,7,363,5],[329,6,364,4,"velocityThreshold"],[329,23,364,21],[329,25,364,23],[329,28,364,26],[330,6,365,4,"repDetectionWindow"],[330,24,365,22],[330,26,365,24],[330,29,365,27],[331,6,366,4,"smoothingFactor"],[331,21,366,19],[331,23,366,21],[332,4,367,2],[332,5,367,3],[333,2,368,0],[334,0,368,1],[334,3]],"functionMap":{"names":["<global>","pixelsToMeters","calculateVelocity","BarTrackerState","BarTrackerState#constructor","BarTrackerState#processPosition","BarTrackerState#applySmoothing","BarTrackerState#detectPhaseAndRep","repVelocities.reduce$argument_0","BarTrackerState#createVelocityData","BarTrackerState#reset","BarTrackerState#getRepCount","BarTrackerState#getBaselineVelocity","BarPositionSimulator","BarPositionSimulator#constructor","BarPositionSimulator#getNextPosition","BarPositionSimulator#reset","createDefaultConfig"],"mappings":"AAA;OCyD;CDW;OEK;CFgB;OGM;ECW,6CD;EEK;GF0B;EGE;GHa;EIE;oCC0B,eD;GJ4B;EME;kCDE,eC;GNe;EOK;GPU;EQK;GRE;ESK;GTE;CHC;OaM;ECM;GDO;EEM;GFyD;EGK;GHI;CbC;OiBK;CjBa"},"hasCjsExports":false},"type":"js/module"}]}