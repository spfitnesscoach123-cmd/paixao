{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":15,"column":0,"index":343},"end":{"line":15,"column":65,"index":408}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./barTracker","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":16,"column":0,"index":409},"end":{"line":22,"column":22,"index":537}}],"key":"uh0oQIZY+w24nReKRxQwxmE8ffA=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";Object.defineProperty(e,'__esModule',{value:!0}),e.useBarTracking=function(s){const[o,l]=(0,t.useState)(!1),[p,y]=(0,t.useState)(0),[f,k]=(0,t.useState)(0),[S,C]=(0,t.useState)(0),[V,h]=(0,t.useState)(0),[v,D]=(0,t.useState)(0),[b,M]=(0,t.useState)('stationary'),[T,P]=(0,t.useState)('neutral'),[R,I]=(0,t.useState)([]),_=(0,t.useRef)(null),w=(0,t.useRef)(null),B=(0,t.useRef)(null),E=(0,t.useRef)(0);(0,t.useEffect)(()=>{const t=(0,n.createDefaultConfig)({heightCm:s.cameraHeight,distanceCm:s.cameraDistance});return _.current=new n.BarTrackerState(t),!1!==s.useSimulation&&(w.current=new n.BarPositionSimulator(s.loadKg)),()=>{B.current&&clearInterval(B.current)}},[s.cameraHeight,s.cameraDistance,s.loadKg,s.useSimulation]);const H=(0,t.useCallback)(t=>{if(y(Math.round(100*t.instantVelocity)/100),C(Math.round(100*t.meanVelocity)/100),M(t.phase),h(t.velocityDrop),t.instantVelocity>f&&k(Math.round(100*t.instantVelocity)/100),t.velocityDrop>c?P('red'):t.instantVelocity>.1?P('green'):P('neutral'),t.repComplete){const n=_.current;if(n){const c=n.getRepCount();if(c>E.current){E.current=c,D(c);const n={rep:c,meanVelocity:Math.round(100*t.meanVelocity)/100,peakVelocity:Math.round(100*t.peakVelocity)/100,velocityDrop:t.velocityDrop,timestamp:Date.now()};I(t=>[...t,n])}}}},[f]),K=(0,t.useCallback)(t=>{if(!_.current||!o)return;const n=_.current.processPosition(t);H(n)},[o,H]),j=(0,t.useCallback)(()=>{l(!0),y(0),k(0),C(0),h(0),D(0),M('stationary'),P('neutral'),I([]),E.current=0,_.current&&_.current.reset(),!1!==s.useSimulation&&w.current&&(w.current.reset(),B.current=setInterval(()=>{if(w.current&&_.current){const t=w.current.getNextPosition(),n=_.current.processPosition(t);H(n)}},u))},[s.useSimulation,H]),x=(0,t.useCallback)(()=>{l(!1),B.current&&(clearInterval(B.current),B.current=null)},[]),F=(0,t.useCallback)(()=>{x(),y(0),k(0),C(0),h(0),D(0),M('stationary'),P('neutral'),I([]),E.current=0,_.current&&_.current.reset(),w.current&&w.current.reset()},[x]);return(0,t.useEffect)(()=>()=>{B.current&&clearInterval(B.current)},[]),{isTracking:o,currentVelocity:p,peakVelocity:f,meanVelocity:S,velocityDrop:V,repCount:v,phase:b,feedbackColor:T,repsData:R,startTracking:j,stopTracking:x,resetTracking:F,processFrame:K}};var t=r(d[0]),n=r(d[1]);const c=10,u=33});","lineCount":1,"map":[[1,90,63,0,"e"],[1,92,63,0,"useBarTracking"],[1,107,63,7],[1,116,63,31,"config"],[1,119,64,2],[1,125,64,9,"isTracking"],[1,127,64,21,"setIsTracking"],[1,131,64,38],[1,133,64,38,"useState"],[1,135,64,46,"useState"],[1,146,64,47],[1,150,65,9,"currentVelocity"],[1,152,65,26,"setCurrentVelocity"],[1,156,65,48],[1,158,65,48,"useState"],[1,160,65,56,"useState"],[1,170,65,57],[1,174,66,9,"peakVelocity"],[1,176,66,23,"setPeakVelocity"],[1,180,66,42],[1,182,66,42,"useState"],[1,184,66,50,"useState"],[1,194,66,51],[1,198,67,9,"meanVelocity"],[1,200,67,23,"setMeanVelocity"],[1,204,67,42],[1,206,67,42,"useState"],[1,208,67,50,"useState"],[1,218,67,51],[1,222,68,9,"velocityDrop"],[1,224,68,23,"setVelocityDrop"],[1,228,68,42],[1,230,68,42,"useState"],[1,232,68,50,"useState"],[1,242,68,51],[1,246,69,9,"repCount"],[1,248,69,19,"setRepCount"],[1,252,69,34],[1,254,69,34,"useState"],[1,256,69,42,"useState"],[1,266,69,43],[1,270,70,9,"phase"],[1,272,70,16,"setPhase"],[1,276,70,28],[1,278,70,28,"useState"],[1,280,70,36,"useState"],[1,290,70,80],[1,305,71,9,"feedbackColor"],[1,307,71,24,"setFeedbackColor"],[1,311,71,44],[1,313,71,44,"useState"],[1,315,71,52,"useState"],[1,325,71,82],[1,337,72,9,"repsData"],[1,339,72,19,"setRepsData"],[1,343,72,34],[1,345,72,34,"useState"],[1,347,72,42,"useState"],[1,357,72,54],[1,361,75,8,"trackerRef"],[1,364,75,21],[1,366,75,21,"useRef"],[1,368,75,27,"useRef"],[1,376,75,52],[1,382,76,8,"simulatorRef"],[1,385,76,23],[1,387,76,23,"useRef"],[1,389,76,29,"useRef"],[1,397,76,59],[1,403,77,8,"intervalRef"],[1,406,77,22],[1,408,77,22,"useRef"],[1,410,77,28,"useRef"],[1,418,77,68],[1,424,78,8,"lastRepCountRef"],[1,427,78,26],[1,429,78,26,"useRef"],[1,431,78,32,"useRef"],[1,439,78,33],[1,443,81,2],[1,445,81,2,"useEffect"],[1,447,81,11,"useEffect"],[1,458,81,12],[1,463,82,4],[1,469,82,10,"trackerConfig"],[1,472,82,26],[1,474,82,26,"createDefaultConfig"],[1,476,82,45,"createDefaultConfig"],[1,497,82,46],[1,498,83,6,"heightCm"],[1,507,83,16,"config"],[1,509,83,23,"cameraHeight"],[1,522,84,6,"distanceCm"],[1,533,84,18,"config"],[1,535,84,25,"cameraDistance"],[1,552,93,4],[1,559,86,4,"trackerRef"],[1,561,86,15,"current"],[1,569,86,25],[1,573,86,29,"BarTrackerState"],[1,575,86,44,"BarTrackerState"],[1,591,86,45,"trackerConfig"],[1,595,89,33],[1,599,89,8,"config"],[1,601,89,15,"useSimulation"],[1,617,90,6,"simulatorRef"],[1,619,90,19,"current"],[1,627,90,29],[1,631,90,33,"BarPositionSimulator"],[1,633,90,53,"BarPositionSimulator"],[1,654,90,54,"config"],[1,656,90,61,"loadKg"],[1,665,93,11],[1,670,94,10,"intervalRef"],[1,672,94,22,"current"],[1,681,95,8,"clearInterval"],[1,695,95,22,"intervalRef"],[1,697,95,34,"current"],[1,708,98,5],[1,709,98,6,"config"],[1,711,98,13,"cameraHeight"],[1,724,98,27,"config"],[1,726,98,34,"cameraDistance"],[1,741,98,50,"config"],[1,743,98,57,"loadKg"],[1,750,98,65,"config"],[1,752,98,72,"useSimulation"],[1,768,103,2],[1,774,103,8,"processVelocityData"],[1,777,103,30],[1,779,103,30,"useCallback"],[1,781,103,41,"useCallback"],[1,794,103,43,"data"],[1,798,124,4],[1,801,104,4,"setCurrentVelocity"],[1,803,104,23,"Math"],[1,808,104,28,"round"],[1,814,104,57],[1,818,104,34,"data"],[1,820,104,39,"instantVelocity"],[1,837,104,64],[1,842,105,4,"setMeanVelocity"],[1,844,105,20,"Math"],[1,849,105,25,"round"],[1,855,105,51],[1,859,105,31,"data"],[1,861,105,36,"meanVelocity"],[1,875,105,58],[1,880,106,4,"setPhase"],[1,882,106,13,"data"],[1,884,106,18,"phase"],[1,891,107,4,"setVelocityDrop"],[1,893,107,20,"data"],[1,895,107,25,"velocityDrop"],[1,909,110,8,"data"],[1,911,110,13,"instantVelocity"],[1,927,110,31,"peakVelocity"],[1,930,111,6,"setPeakVelocity"],[1,932,111,22,"Math"],[1,937,111,27,"round"],[1,943,111,56],[1,947,111,33,"data"],[1,949,111,38,"instantVelocity"],[1,966,111,63],[1,971,115,8,"data"],[1,973,115,13,"velocityDrop"],[1,986,115,28,"VELOCITY_DROP_THRESHOLD"],[1,988,116,6,"setFeedbackColor"],[1,990,116,23],[1,997,117,15,"data"],[1,999,117,20,"instantVelocity"],[1,1015,117,38],[1,1018,118,6,"setFeedbackColor"],[1,1020,118,23],[1,1029,120,6,"setFeedbackColor"],[1,1031,120,23],[1,1042,124,8,"data"],[1,1044,124,13,"repComplete"],[1,1056,124,26],[1,1057,125,6],[1,1063,125,12,"tracker"],[1,1065,125,22,"trackerRef"],[1,1067,125,33,"current"],[1,1075,126,6],[1,1078,126,10,"tracker"],[1,1080,126,19],[1,1081,127,8],[1,1087,127,14,"newRepCount"],[1,1089,127,28,"tracker"],[1,1091,127,36,"getRepCount"],[1,1105,130,8],[1,1108,130,12,"newRepCount"],[1,1110,130,26,"lastRepCountRef"],[1,1112,130,42,"current"],[1,1120,130,51],[1,1121,131,10,"lastRepCountRef"],[1,1123,131,26,"current"],[1,1131,131,36,"newRepCount"],[1,1133,132,10,"setRepCount"],[1,1135,132,22,"newRepCount"],[1,1138,134,10],[1,1144,134,16,"newRepData"],[1,1146,134,38],[1,1147,135,12,"rep"],[1,1151,135,17,"newRepCount"],[1,1153,136,12,"meanVelocity"],[1,1166,136,26,"Math"],[1,1171,136,31,"round"],[1,1177,136,57],[1,1181,136,37,"data"],[1,1183,136,42,"meanVelocity"],[1,1197,136,64],[1,1201,137,12,"peakVelocity"],[1,1214,137,26,"Math"],[1,1219,137,31,"round"],[1,1225,137,57],[1,1229,137,37,"data"],[1,1231,137,42,"peakVelocity"],[1,1245,137,64],[1,1249,138,12,"velocityDrop"],[1,1262,138,26,"data"],[1,1264,138,31,"velocityDrop"],[1,1277,139,12,"timestamp"],[1,1287,139,23,"Date"],[1,1292,139,28,"now"],[1,1299,142,10,"setRepsData"],[1,1301,142,22,"prev"],[1,1304,142,30],[1,1308,142,34,"prev"],[1,1310,142,40,"newRepData"],[1,1313,143,8],[1,1314,144,6],[1,1315,145,4],[1,1318,146,5],[1,1319,146,6,"peakVelocity"],[1,1323,151,8,"processFrame"],[1,1326,151,23],[1,1328,151,23,"useCallback"],[1,1330,151,34,"useCallback"],[1,1343,151,36,"position"],[1,1347,152,4],[1,1351,152,9,"trackerRef"],[1,1353,152,20,"current"],[1,1363,152,32,"isTracking"],[1,1365,152,44],[1,1372,154,4],[1,1378,154,10,"velocityData"],[1,1380,154,25,"trackerRef"],[1,1382,154,36,"current"],[1,1390,154,44,"processPosition"],[1,1406,154,60,"position"],[1,1409,155,4,"processVelocityData"],[1,1411,155,24,"velocityData"],[1,1415,156,5],[1,1416,156,6,"isTracking"],[1,1418,156,18,"processVelocityData"],[1,1422,161,8,"startTracking"],[1,1425,161,24],[1,1427,161,24,"useCallback"],[1,1429,161,35,"useCallback"],[1,1442,161,36],[1,1447,163,4,"setIsTracking"],[1,1450,163,18],[1,1453,164,4,"setCurrentVelocity"],[1,1455,164,23],[1,1458,165,4,"setPeakVelocity"],[1,1460,165,20],[1,1463,166,4,"setMeanVelocity"],[1,1465,166,20],[1,1468,167,4,"setVelocityDrop"],[1,1470,167,20],[1,1473,168,4,"setRepCount"],[1,1475,168,16],[1,1478,169,4,"setPhase"],[1,1480,169,13],[1,1494,170,4,"setFeedbackColor"],[1,1496,170,21],[1,1507,171,4,"setRepsData"],[1,1509,171,16],[1,1513,172,4,"lastRepCountRef"],[1,1515,172,20,"current"],[1,1523,172,30],[1,1525,175,8,"trackerRef"],[1,1527,175,19,"current"],[1,1536,176,6,"trackerRef"],[1,1538,176,17,"current"],[1,1546,176,25,"reset"],[1,1555,180,33],[1,1559,180,8,"config"],[1,1561,180,15,"useSimulation"],[1,1576,180,42,"simulatorRef"],[1,1578,180,55,"current"],[1,1588,181,6,"simulatorRef"],[1,1590,181,19,"current"],[1,1598,181,27,"reset"],[1,1606,183,6,"intervalRef"],[1,1608,183,18,"current"],[1,1616,183,28,"setInterval"],[1,1628,183,40],[1,1633,184,8],[1,1636,184,12,"simulatorRef"],[1,1638,184,25,"current"],[1,1647,184,36,"trackerRef"],[1,1649,184,47,"current"],[1,1657,184,56],[1,1658,185,10],[1,1664,185,16,"position"],[1,1666,185,27,"simulatorRef"],[1,1668,185,40,"current"],[1,1676,185,48,"getNextPosition"],[1,1694,186,16,"velocityData"],[1,1696,186,31,"trackerRef"],[1,1698,186,42,"current"],[1,1706,186,50,"processPosition"],[1,1722,186,66,"position"],[1,1725,187,10,"processVelocityData"],[1,1727,187,30,"velocityData"],[1,1729,188,8],[1,1732,189,9,"TRACKING_INTERVAL"],[1,1737,191,5],[1,1738,191,6,"config"],[1,1740,191,13,"useSimulation"],[1,1754,191,28,"processVelocityData"],[1,1758,196,8,"stopTracking"],[1,1761,196,23],[1,1763,196,23,"useCallback"],[1,1765,196,34,"useCallback"],[1,1778,196,35],[1,1783,197,4,"setIsTracking"],[1,1786,197,18],[1,1789,199,8,"intervalRef"],[1,1791,199,20,"current"],[1,1801,200,6,"clearInterval"],[1,1815,200,20,"intervalRef"],[1,1817,200,32,"current"],[1,1826,201,6,"intervalRef"],[1,1828,201,18,"current"],[1,1836,201,28],[1,1843,203,5],[1,1847,208,8,"resetTracking"],[1,1850,208,24],[1,1852,208,24,"useCallback"],[1,1854,208,35,"useCallback"],[1,1867,208,36],[1,1872,209,4,"stopTracking"],[1,1876,210,4,"setCurrentVelocity"],[1,1878,210,23],[1,1881,211,4,"setPeakVelocity"],[1,1883,211,20],[1,1886,212,4,"setMeanVelocity"],[1,1888,212,20],[1,1891,213,4,"setVelocityDrop"],[1,1893,213,20],[1,1896,214,4,"setRepCount"],[1,1898,214,16],[1,1901,215,4,"setPhase"],[1,1903,215,13],[1,1917,216,4,"setFeedbackColor"],[1,1919,216,21],[1,1930,217,4,"setRepsData"],[1,1932,217,16],[1,1936,218,4,"lastRepCountRef"],[1,1938,218,20,"current"],[1,1946,218,30],[1,1948,220,8,"trackerRef"],[1,1950,220,19,"current"],[1,1959,221,6,"trackerRef"],[1,1961,221,17,"current"],[1,1969,221,25,"reset"],[1,1977,223,8,"simulatorRef"],[1,1979,223,21,"current"],[1,1988,224,6,"simulatorRef"],[1,1990,224,19,"current"],[1,1998,224,27,"reset"],[1,2007,226,5],[1,2008,226,6,"stopTracking"],[1,2012,237,2],[1,2019,229,2],[1,2021,229,2,"useEffect"],[1,2023,229,11,"useEffect"],[1,2034,229,12],[1,2038,230,11],[1,2043,231,10,"intervalRef"],[1,2045,231,22,"current"],[1,2054,232,8,"clearInterval"],[1,2068,232,22,"intervalRef"],[1,2070,232,34,"current"],[1,2080,235,5],[1,2084,237,9],[1,2085,238,4,"isTracking"],[1,2098,239,4,"currentVelocity"],[1,2116,240,4,"peakVelocity"],[1,2131,241,4,"meanVelocity"],[1,2146,242,4,"velocityDrop"],[1,2161,243,4,"repCount"],[1,2172,244,4,"phase"],[1,2180,245,4,"feedbackColor"],[1,2196,246,4,"repsData"],[1,2207,247,4,"startTracking"],[1,2223,248,4,"stopTracking"],[1,2238,249,4,"resetTracking"],[1,2254,250,4,"processFrame"],[1,2269,252,0],[1,2271,15,0],[1,2275,15,0,"_react"],[1,2277,15,0,"r"],[1,2279,15,0,"d"],[1,2281,15,0],[1,2285,16,0,"_barTracker"],[1,2287,16,0,"r"],[1,2289,16,0,"d"],[1,2291,16,0],[1,2295,60,0],[1,2301,60,6,"VELOCITY_DROP_THRESHOLD"],[1,2303,60,32],[1,2306,61,6,"TRACKING_INTERVAL"],[1,2308,61,26],[1,2310,252,1],[1,2313]],"functionMap":{"names":["<global>","useBarTracking","useEffect$argument_0","<anonymous>","processVelocityData","setRepsData$argument_0","processFrame","startTracking","setInterval$argument_0","stopTracking","resetTracking"],"mappings":"AAA;OC8D;YCkB;WCY;KDI;GDC;0CGK;sBCuC,6BD;GHI;mCKK;GLK;oCMK;wCCsB;ODM;GNE;mCQK;GRO;oCSK;GTkB;YCG;WCC;KDI;GDC;CDiB"},"hasCjsExports":false},"type":"js/module"}]}