{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":16,"column":0,"index":387},"end":{"line":16,"column":65,"index":452}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./index","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":494},"end":{"line":24,"column":17,"index":609}}],"key":"9jJrWTI9sYluBZaaUCXMR1CYoA0=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,\"default\",{enumerable:!0,get:function(){return c}}),e.usePoseDetection=s;var t=r(d[0]),n=r(d[1]);const u=30;function s(s={}){const{onPoseDetected:c,useSimulation:o=!1,trackingPointName:l=\"left_hip\",loadKg:f=60,simulationFps:P=u,minConfidence:p=.6}=s,[S,D]=(0,t.useState)(null),[b,v]=(0,t.useState)(!1),[y,C]=(0,t.useState)('uninitialized'),[k,R]=(0,t.useState)(null),[_,E]=(0,t.useState)(0),I=(0,t.useRef)(null),j=(0,t.useRef)(null),w=(0,t.useRef)(null),x=(0,t.useRef)(c);(0,t.useEffect)(()=>{x.current=c},[c]),(0,t.useEffect)(()=>((async()=>{if(o)return j.current=new n.PoseSimulator(f),void C('ready');const t=(0,n.getPoseDetector)({minDetectionConfidence:p});I.current=t;await t.initialize()?(C('ready'),t.subscribe(n=>{D(n),E(t.getFps()),x.current&&x.current(n)})):(C('error'),R(t.getError()))})(),()=>{w.current&&clearInterval(w.current),I.current&&I.current.destroy()}),[o,f,p]);const z=(0,t.useCallback)(()=>{if(!b)if(v(!0),R(null),o&&j.current){j.current.reset();const t=1e3/P;w.current=setInterval(()=>{if(!j.current)return;const t=j.current.getNextPose(l);D(t),E(P),x.current&&x.current(t)},t),console.log('[usePoseDetection] Started simulation mode')}else console.log('[usePoseDetection] Started real detection mode')},[b,o,P,l]),F=(0,t.useCallback)(()=>{v(!1),w.current&&(clearInterval(w.current),w.current=null),console.log('[usePoseDetection] Stopped detection')},[]),N=(0,t.useCallback)(t=>{if(b&&!o&&I.current){I.current.processPoseResult(t)}},[b,o]),O=(0,t.useCallback)(()=>{F(),D(null),E(0),R(null),I.current&&I.current.reset(),j.current&&j.current.reset()},[F]);return{pose:S,isDetecting:b,status:y,error:k,fps:_,isSimulation:o,startDetection:z,stopDetection:F,processExternalPose:N,reset:O}}var c=s});","lineCount":1,"map":[[1,90,240,0,"Object"],[1,97,240,0,"defineProperty"],[1,112,240,0,"e"],[1,114,240,0],[1,125,240,0,"enumerable"],[1,137,240,0],[1,139,240,0,"get"],[1,143,240,0],[1,161,240,0,"_default"],[1,162,240,0],[1,166,79,0,"e"],[1,168,79,0,"usePoseDetection"],[1,187,16,0],[1,191,16,0,"_react"],[1,193,16,0,"r"],[1,195,16,0,"d"],[1,197,16,0],[1,201,18,0,"_index"],[1,203,18,0,"r"],[1,205,18,0,"d"],[1,207,18,0],[1,211,72,0],[1,217,72,6,"DEFAULT_SIMULATION_FPS"],[1,219,72,31],[1,222,79,7],[1,231,79,16,"usePoseDetection"],[1,233,79,33,"config"],[1,235,79,66],[1,236,79,67],[1,239,80,2],[1,245,80,8,"onPoseDetected"],[1,260,81,4,"onPoseDetected"],[1,262,81,18,"useSimulation"],[1,276,82,4,"useSimulation"],[1,279,82,20],[1,281,82,25,"trackingPointName"],[1,299,83,4,"trackingPointName"],[1,301,83,24],[1,312,83,34,"loadKg"],[1,319,84,4,"loadKg"],[1,321,84,13],[1,324,84,15,"simulationFps"],[1,338,85,4,"simulationFps"],[1,340,85,20,"DEFAULT_SIMULATION_FPS"],[1,342,85,42,"minConfidence"],[1,356,86,4,"minConfidence"],[1,358,86,20],[1,362,87,6,"config"],[1,365,90,9,"pose"],[1,367,90,15,"setPose"],[1,371,90,26],[1,373,90,26,"useState"],[1,375,90,34,"useState"],[1,385,90,55],[1,392,91,9,"isDetecting"],[1,394,91,22,"setIsDetecting"],[1,398,91,40],[1,400,91,40,"useState"],[1,402,91,48,"useState"],[1,413,91,49],[1,417,92,9,"status"],[1,419,92,17,"setStatus"],[1,423,92,30],[1,425,92,30,"useState"],[1,427,92,38,"useState"],[1,437,92,59],[1,455,93,9,"error"],[1,457,93,16,"setError"],[1,461,93,28],[1,463,93,28,"useState"],[1,465,93,36,"useState"],[1,475,93,52],[1,482,94,9,"fps"],[1,484,94,14,"setFps"],[1,488,94,24],[1,490,94,24,"useState"],[1,492,94,32,"useState"],[1,502,94,33],[1,505,97,8,"detectorRef"],[1,508,97,22],[1,510,97,22,"useRef"],[1,512,97,28,"useRef"],[1,520,97,50],[1,526,98,8,"simulatorRef"],[1,529,98,23],[1,531,98,23,"useRef"],[1,533,98,29,"useRef"],[1,541,98,52],[1,547,99,8,"intervalRef"],[1,550,99,22],[1,552,99,22,"useRef"],[1,554,99,28,"useRef"],[1,562,99,68],[1,568,100,8,"callbackRef"],[1,571,100,22],[1,573,100,22,"useRef"],[1,575,100,28,"useRef"],[1,583,100,29,"onPoseDetected"],[1,587,103,2],[1,589,103,2,"useEffect"],[1,591,103,11,"useEffect"],[1,602,103,12],[1,607,104,4,"callbackRef"],[1,609,104,16,"current"],[1,617,104,26,"onPoseDetected"],[1,620,105,5],[1,621,105,6,"onPoseDetected"],[1,626,108,2],[1,628,108,2,"useEffect"],[1,630,108,11,"useEffect"],[1,641,108,12],[1,646,109,25,"async"],[1,657,110,6],[1,660,110,10,"useSimulation"],[1,662,113,8],[1,669,111,8,"simulatorRef"],[1,671,111,21,"current"],[1,679,111,31],[1,683,111,35,"PoseSimulator"],[1,685,111,48,"PoseSimulator"],[1,699,111,49,"loadKg"],[1,707,112,8,"setStatus"],[1,709,112,18],[1,718,116,6],[1,724,116,12,"detector"],[1,727,116,23],[1,729,116,23,"getPoseDetector"],[1,731,116,38,"getPoseDetector"],[1,748,116,39],[1,749,116,41,"minDetectionConfidence"],[1,772,116,65,"minConfidence"],[1,776,117,6,"detectorRef"],[1,778,117,18,"current"],[1,786,117,28,"detector"],[1,794,119,28,"detector"],[1,796,119,37,"initialize"],[1,810,121,8,"setStatus"],[1,812,121,18],[1,821,124,8,"detector"],[1,823,124,17,"subscribe"],[1,833,124,28,"detectedPose"],[1,837,125,10,"setPose"],[1,839,125,18,"detectedPose"],[1,842,126,10,"setFps"],[1,844,126,17,"detector"],[1,846,126,26,"getFps"],[1,856,128,14,"callbackRef"],[1,858,128,26,"current"],[1,867,129,12,"callbackRef"],[1,869,129,24,"current"],[1,877,129,32,"detectedPose"],[1,884,133,8,"setStatus"],[1,886,133,18],[1,895,134,8,"setError"],[1,897,134,17,"detector"],[1,899,134,26,"getError"],[1,913,138,4,"initDetector"],[1,916,140,11],[1,921,141,10,"intervalRef"],[1,923,141,22,"current"],[1,932,142,8,"clearInterval"],[1,946,142,22,"intervalRef"],[1,948,142,34,"current"],[1,957,144,10,"detectorRef"],[1,959,144,22,"current"],[1,968,145,8,"detectorRef"],[1,970,145,20,"current"],[1,978,145,28,"destroy"],[1,990,148,5],[1,991,148,6,"useSimulation"],[1,993,148,21,"loadKg"],[1,995,148,29,"minConfidence"],[1,999,153,2],[1,1005,153,8,"startDetection"],[1,1008,153,25],[1,1010,153,25,"useCallback"],[1,1012,153,36,"useCallback"],[1,1025,153,37],[1,1030,154,4],[1,1034,154,8,"isDetecting"],[1,1036,159,4],[1,1039,156,4,"setIsDetecting"],[1,1042,156,19],[1,1045,157,4,"setError"],[1,1047,157,13],[1,1053,159,8,"useSimulation"],[1,1056,159,25,"simulatorRef"],[1,1058,159,38,"current"],[1,1066,159,47],[1,1067,161,6,"simulatorRef"],[1,1069,161,19,"current"],[1,1077,161,27,"reset"],[1,1085,163,6],[1,1091,163,12,"interval"],[1,1093,163,23],[1,1097,163,30,"simulationFps"],[1,1099,164,6,"intervalRef"],[1,1101,164,18,"current"],[1,1109,164,28,"setInterval"],[1,1121,164,40],[1,1126,165,8],[1,1130,165,13,"simulatorRef"],[1,1132,165,26,"current"],[1,1140,165,35],[1,1147,167,8],[1,1153,167,14,"simPose"],[1,1155,167,24,"simulatorRef"],[1,1157,167,37,"current"],[1,1165,167,45,"getNextPose"],[1,1177,167,57,"trackingPointName"],[1,1180,168,8,"setPose"],[1,1182,168,16,"simPose"],[1,1185,169,8,"setFps"],[1,1187,169,15,"simulationFps"],[1,1190,171,12,"callbackRef"],[1,1192,171,24,"current"],[1,1201,172,10,"callbackRef"],[1,1203,172,22,"current"],[1,1211,172,30,"simPose"],[1,1215,174,9,"interval"],[1,1218,176,6,"console"],[1,1226,176,14,"log"],[1,1230,176,18],[1,1275,177,4],[1,1281,179,6,"console"],[1,1289,179,14,"log"],[1,1293,179,18],[1,1344,181,5],[1,1345,181,6,"isDetecting"],[1,1347,181,19,"useSimulation"],[1,1349,181,34,"simulationFps"],[1,1351,181,49,"trackingPointName"],[1,1355,186,8,"stopDetection"],[1,1358,186,24],[1,1360,186,24,"useCallback"],[1,1362,186,35,"useCallback"],[1,1375,186,36],[1,1380,187,4,"setIsDetecting"],[1,1383,187,19],[1,1386,189,8,"intervalRef"],[1,1388,189,20,"current"],[1,1398,190,6,"clearInterval"],[1,1412,190,20,"intervalRef"],[1,1414,190,32,"current"],[1,1423,191,6,"intervalRef"],[1,1425,191,18,"current"],[1,1433,191,28],[1,1439,194,4,"console"],[1,1447,194,12,"log"],[1,1451,194,16],[1,1492,195,5],[1,1496,200,8,"processExternalPose"],[1,1499,200,30],[1,1501,200,30,"useCallback"],[1,1503,200,41,"useCallback"],[1,1516,200,43,"poseResult"],[1,1520,201,4],[1,1523,201,9,"isDetecting"],[1,1527,201,24,"useSimulation"],[1,1530,203,8,"detectorRef"],[1,1532,203,20,"current"],[1,1540,203,29],[1,1541,204,28,"detectorRef"],[1,1543,204,40,"current"],[1,1551,204,48,"processPoseResult"],[1,1569,204,66,"poseResult"],[1,1571,206,4],[1,1574,207,5],[1,1575,207,6,"isDetecting"],[1,1577,207,19,"useSimulation"],[1,1581,212,8,"reset"],[1,1584,212,16],[1,1586,212,16,"useCallback"],[1,1588,212,27,"useCallback"],[1,1601,212,28],[1,1606,213,4,"stopDetection"],[1,1610,214,4,"setPose"],[1,1612,214,12],[1,1618,215,4,"setFps"],[1,1620,215,11],[1,1623,216,4,"setError"],[1,1625,216,13],[1,1631,218,8,"detectorRef"],[1,1633,218,20,"current"],[1,1642,219,6,"detectorRef"],[1,1644,219,18,"current"],[1,1652,219,26,"reset"],[1,1660,221,8,"simulatorRef"],[1,1662,221,21,"current"],[1,1671,222,6,"simulatorRef"],[1,1673,222,19,"current"],[1,1681,222,27,"reset"],[1,1690,224,5],[1,1691,224,6,"stopDetection"],[1,1695,226,2],[1,1701,226,9],[1,1702,227,4,"pose"],[1,1709,228,4,"isDetecting"],[1,1723,229,4,"status"],[1,1732,230,4,"error"],[1,1740,231,4,"fps"],[1,1746,232,4,"isSimulation"],[1,1759,232,18,"useSimulation"],[1,1761,233,4,"startDetection"],[1,1778,234,4,"stopDetection"],[1,1794,235,4,"processExternalPose"],[1,1816,236,4,"reset"],[1,1824,238,0],[1,1825,240,0],[1,1829,240,0,"_default"],[1,1831,240,15,"usePoseDetection"],[1,1832,240,32],[1,1835]],"functionMap":{"names":["<global>","usePoseDetection","useEffect$argument_0","initDetector","detector.subscribe$argument_0","<anonymous>","startDetection","setInterval$argument_0","stopDetection","processExternalPose","reset"],"mappings":"AAA;OC8E;YCwB;GDE;YCG;yBCC;2BCe;SDO;KDK;WGI;KHO;GDC;qCKK;wCCW;ODU;GLO;oCOK;GPS;0CQK;GRO;4BSK;GTY;CDc"},"hasCjsExports":false},"type":"js/module"}]}