{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":25},"end":{"line":2,"column":31,"index":56}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./WebCameraUtils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":57},"end":{"line":3,"column":42,"index":99}}],"key":"7QFlRc+R5Zhr/RLcJUPMtLUHEsc=","exportNames":["*"],"imports":1}},{"name":"./WebConstants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":100},"end":{"line":4,"column":56,"index":156}}],"key":"VYBjMDeNhUYVRZIl4m+mFrGQcXE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,_d){\"use strict\";function e(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach(function(n){var c=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,c.get?c:{enumerable:!0,get:function(){return e[n]}})}),t.default=e,t}Object.defineProperty(_e,'__esModule',{value:!0}),_e.useWebCameraStream=function(e,s,f,{onCameraReady:l,onMountError:d}){const p=t.useRef(!1),h=t.useRef([]),b=t.useRef({autoFocus:'continuous',flashMode:'off',whiteBalance:'continuous',zoom:1}),[y,M]=t.useState(null),C=t.useMemo(()=>y?y.getTracks()[0].getSettings():null,[y]),E=t.useMemo(()=>{if(!C)return null;const{facingMode:e=\"user\"}=C;return c.FacingModeToCameraType[e]},[C]),S=t.useCallback(async()=>{try{return await n.getPreferredStreamDevice(s)}catch(e){return d&&d({nativeEvent:e}),null}},[s,d]),k=t.useCallback(async()=>{const e=await S();return n.compareStreams(e,y)||(h.current.some(t=>t.id===e?.id)||h.current.push(e),M(e),l&&l()),!1},[S,M,l,y,h.current]);return t.useEffect(()=>{p.current||(p.current=!0,k().then(e=>{p.current=e}).catch(()=>{p.current=!1}))},[s]),t.useEffect(()=>{const e={};for(const t of o)if(t in f){const n=f[t];n!==b.current[t]&&(e[t]=n)}const t=!!Object.keys(e).length,c={...b.current,...e};t&&n.syncTrackCapabilities(s,y,e),b.current=c},[f.autoFocus,f.flashMode,f.exposureCompensation,f.colorTemperature,f.iso,f.brightness,f.contrast,f.saturation,f.sharpness,f.focusDistance,f.whiteBalance,f.zoom]),t.useEffect(()=>{e.current&&n.setVideoSource(e.current,y)},[e.current,y]),t.useEffect(()=>()=>{for(const e of h.current)n.stopMediaStream(e);e.current&&n.setVideoSource(e.current,y)},[]),u(e.current,()=>{n.syncTrackCapabilities(s,y,b.current)}),{type:E,mediaTrackSettings:C}};var t=e(r(_d[0])),n=e(r(_d[1])),c=r(_d[2]);const o=['autoFocus','flashMode','exposureCompensation','colorTemperature','iso','brightness','contrast','saturation','sharpness','focusDistance','whiteBalance','zoom'];function u(e,n){t.useEffect(()=>{e&&e.addEventListener('loadedmetadata',()=>{requestAnimationFrame(()=>{n()})})},[e])}});","lineCount":1,"map":[[1,327,33,0,"_e"],[1,330,33,0,"useWebCameraStream"],[1,349,33,7],[1,358,33,35,"video"],[1,360,33,42,"preferredType"],[1,362,33,57,"settings"],[1,365,33,67,"onCameraReady"],[1,379,33,69,"onCameraReady"],[1,381,33,82,"onMountError"],[1,394,33,84,"onMountError"],[1,398,34,4],[1,404,34,10,"isStartingCamera"],[1,406,34,29,"React"],[1,408,34,35,"useRef"],[1,416,34,42],[1,419,35,10,"activeStreams"],[1,421,35,26,"React"],[1,423,35,32,"useRef"],[1,430,35,39],[1,434,36,10,"capabilities"],[1,436,36,25,"React"],[1,438,36,31,"useRef"],[1,445,36,38],[1,446,37,8,"autoFocus"],[1,456,37,19],[1,469,38,8,"flashMode"],[1,479,38,19],[1,485,39,8,"whiteBalance"],[1,498,39,22],[1,511,40,8,"zoom"],[1,516,40,14],[1,521,42,11,"stream"],[1,523,42,19,"setStream"],[1,526,42,32,"React"],[1,528,42,38,"useState"],[1,537,42,47],[1,543,43,10,"mediaTrackSettings"],[1,545,43,31,"React"],[1,547,43,37,"useMemo"],[1,555,43,45],[1,559,44,15,"stream"],[1,561,44,24,"stream"],[1,563,44,31,"getTracks"],[1,575,44,43],[1,578,44,46,"getSettings"],[1,592,44,62],[1,597,45,7],[1,598,45,8,"stream"],[1,602,47,10,"type"],[1,604,47,17,"React"],[1,606,47,23,"useMemo"],[1,614,47,31],[1,619,48,8],[1,623,48,13,"mediaTrackSettings"],[1,625,49,12],[1,632,49,19],[1,637,52,8],[1,643,52,14,"facingMode"],[1,654,52,16,"facingMode"],[1,656,52,29],[1,664,52,40,"mediaTrackSettings"],[1,666,53,8],[1,673,53,15,"FacingModeToCameraType"],[1,675,53,37,"FacingModeToCameraType"],[1,698,53,38,"facingMode"],[1,702,54,7],[1,703,54,8,"mediaTrackSettings"],[1,707,55,10,"getStreamDeviceAsync"],[1,709,55,33,"React"],[1,711,55,39,"useCallback"],[1,723,55,51,"async"],[1,733,56,8],[1,737,57,12],[1,750,57,25,"Utils"],[1,752,57,31,"getPreferredStreamDevice"],[1,777,57,56,"preferredType"],[1,779,58,8],[1,780,59,8],[1,786,59,15,"nativeEvent"],[1,789,66,12],[1,796,63,16,"onMountError"],[1,799,64,16,"onMountError"],[1,801,64,29],[1,802,64,31,"nativeEvent"],[1,818,66,19],[1,822,67,8],[1,825,68,7],[1,826,68,8,"preferredType"],[1,828,68,23,"onMountError"],[1,832,69,10,"resumeAsync"],[1,834,69,24,"React"],[1,836,69,30,"useCallback"],[1,848,69,42,"async"],[1,858,70,8],[1,864,70,14,"nextStream"],[1,872,70,33,"getStreamDeviceAsync"],[1,876,71,8],[1,883,71,12,"Utils"],[1,885,71,18,"compareStreams"],[1,900,71,33,"nextStream"],[1,902,71,45,"stream"],[1,907,79,13,"activeStreams"],[1,909,79,27,"current"],[1,917,79,35,"some"],[1,922,79,41,"value"],[1,925,79,51,"value"],[1,927,79,57,"id"],[1,932,79,64,"nextStream"],[1,935,79,76,"id"],[1,940,80,12,"activeStreams"],[1,942,80,26,"current"],[1,950,80,34,"push"],[1,955,80,39,"nextStream"],[1,958,83,8,"setStream"],[1,960,83,18,"nextStream"],[1,963,84,12,"onCameraReady"],[1,966,85,12,"onCameraReady"],[1,972,75,19],[1,975,88,7],[1,976,88,8,"getStreamDeviceAsync"],[1,978,88,30,"setStream"],[1,980,88,41,"onCameraReady"],[1,982,88,56,"stream"],[1,984,88,64,"activeStreams"],[1,986,88,78,"current"],[1,996,160,4],[1,1003,89,4,"React"],[1,1005,89,10,"useEffect"],[1,1015,89,20],[1,1020,91,12,"isStartingCamera"],[1,1022,91,29,"current"],[1,1032,94,8,"isStartingCamera"],[1,1034,94,25,"current"],[1,1043,94,35],[1,1045,95,8,"resumeAsync"],[1,1049,96,13,"then"],[1,1054,96,19,"isStarting"],[1,1058,97,12,"isStartingCamera"],[1,1060,97,29,"current"],[1,1068,97,39,"isStarting"],[1,1072,99,13,"catch"],[1,1078,99,19],[1,1083,101,12,"isStartingCamera"],[1,1085,101,29,"current"],[1,1094,101,39],[1,1100,103,7],[1,1101,103,8,"preferredType"],[1,1105,105,4,"React"],[1,1107,105,10,"useEffect"],[1,1117,105,20],[1,1122,106,8],[1,1128,106,14,"changes"],[1,1130,106,24],[1,1131,106,25],[1,1133,107,8],[1,1137,107,13],[1,1143,107,19,"key"],[1,1148,107,26,"VALID_SETTINGS_KEYS"],[1,1150,108,12],[1,1153,108,16,"key"],[1,1158,108,23,"settings"],[1,1160,108,33],[1,1161,109,16],[1,1167,109,22,"nextValue"],[1,1169,109,34,"settings"],[1,1171,109,43,"key"],[1,1174,110,20,"nextValue"],[1,1178,110,34,"capabilities"],[1,1180,110,47,"current"],[1,1188,110,55,"key"],[1,1193,111,20,"changes"],[1,1195,111,28,"key"],[1,1198,111,35,"nextValue"],[1,1200,113,12],[1,1201,116,8],[1,1207,116,14,"hasChanges"],[1,1211,116,29,"Object"],[1,1218,116,36,"keys"],[1,1223,116,41,"changes"],[1,1226,116,50,"length"],[1,1233,117,14,"nextWebCameraSettings"],[1,1235,117,38],[1,1239,117,43,"capabilities"],[1,1241,117,56,"current"],[1,1252,117,68,"changes"],[1,1255,118,12,"hasChanges"],[1,1258,119,12,"Utils"],[1,1260,119,18,"syncTrackCapabilities"],[1,1282,119,40,"preferredType"],[1,1284,119,55,"stream"],[1,1286,119,63,"changes"],[1,1289,121,8,"capabilities"],[1,1291,121,21,"current"],[1,1299,121,31,"nextWebCameraSettings"],[1,1302,122,7],[1,1303,123,8,"settings"],[1,1305,123,17,"autoFocus"],[1,1315,124,8,"settings"],[1,1317,124,17,"flashMode"],[1,1327,125,8,"settings"],[1,1329,125,17,"exposureCompensation"],[1,1350,126,8,"settings"],[1,1352,126,17,"colorTemperature"],[1,1369,127,8,"settings"],[1,1371,127,17,"iso"],[1,1375,128,8,"settings"],[1,1377,128,17,"brightness"],[1,1388,129,8,"settings"],[1,1390,129,17,"contrast"],[1,1399,130,8,"settings"],[1,1401,130,17,"saturation"],[1,1412,131,8,"settings"],[1,1414,131,17,"sharpness"],[1,1424,132,8,"settings"],[1,1426,132,17,"focusDistance"],[1,1440,133,8,"settings"],[1,1442,133,17,"whiteBalance"],[1,1455,134,8,"settings"],[1,1457,134,17,"zoom"],[1,1464,136,4,"React"],[1,1466,136,10,"useEffect"],[1,1476,136,20],[1,1481,138,13,"video"],[1,1483,138,19,"current"],[1,1492,141,8,"Utils"],[1,1494,141,14,"setVideoSource"],[1,1509,141,29,"video"],[1,1511,141,35,"current"],[1,1519,141,44,"stream"],[1,1523,142,7],[1,1524,142,8,"video"],[1,1526,142,14,"current"],[1,1534,142,23,"stream"],[1,1538,143,4,"React"],[1,1540,143,10,"useEffect"],[1,1550,143,20],[1,1554,144,15],[1,1559,146,12],[1,1563,146,17],[1,1569,146,23,"stream"],[1,1574,146,33,"activeStreams"],[1,1576,146,47,"current"],[1,1584,148,16,"Utils"],[1,1586,148,22,"stopMediaStream"],[1,1602,148,38,"stream"],[1,1605,150,16,"video"],[1,1607,150,22,"current"],[1,1616,152,16,"Utils"],[1,1618,152,22,"setVideoSource"],[1,1633,152,37,"video"],[1,1635,152,43,"current"],[1,1643,152,52,"stream"],[1,1647,155,7],[1,1651,157,4,"useLoadedVideo"],[1,1653,157,19,"video"],[1,1655,157,25,"current"],[1,1663,157,34],[1,1668,158,8,"Utils"],[1,1670,158,14,"syncTrackCapabilities"],[1,1692,158,36,"preferredType"],[1,1694,158,51,"stream"],[1,1696,158,59,"capabilities"],[1,1698,158,72,"current"],[1,1709,160,11],[1,1710,161,8,"type"],[1,1717,162,8,"mediaTrackSettings"],[1,1738,164,0],[1,1740,2,0],[1,1744,2,0,"React"],[1,1746,2,0,"_interopNamespace"],[1,1748,2,0,"r"],[1,1750,2,0,"_d"],[1,1753,2,0],[1,1758,3,0,"Utils"],[1,1760,3,0,"_interopNamespace"],[1,1762,3,0,"r"],[1,1764,3,0,"_d"],[1,1767,3,0],[1,1772,4,0,"_WebConstants"],[1,1774,4,0,"r"],[1,1776,4,0,"_d"],[1,1779,4,0],[1,1783,5,0],[1,1789,5,6,"VALID_SETTINGS_KEYS"],[1,1791,5,28],[1,1792,6,4],[1,1804,7,4],[1,1816,8,4],[1,1839,9,4],[1,1858,10,4],[1,1864,11,4],[1,1877,12,4],[1,1888,13,4],[1,1901,14,4],[1,1913,15,4],[1,1929,16,4],[1,1944,17,4],[1,1952,19,0],[1,1961,19,9,"useLoadedVideo"],[1,1963,19,24,"video"],[1,1965,19,31,"onLoaded"],[1,1968,20,4,"React"],[1,1970,20,10,"useEffect"],[1,1980,20,20],[1,1985,21,12,"video"],[1,1988,22,12,"video"],[1,1990,22,18,"addEventListener"],[1,2007,22,35],[1,2024,22,53],[1,2029,26,16,"requestAnimationFrame"],[1,2051,26,38],[1,2056,27,20,"onLoaded"],[1,2065,31,7],[1,2066,31,8,"video"],[1,2069,32,0],[1,2070,164,1],[1,2073]],"functionMap":{"names":["<global>","useLoadedVideo","React.useEffect$argument_0","video.addEventListener$argument_1","requestAnimationFrame$argument_0","useWebCameraStream","React.useMemo$argument_0","getStreamDeviceAsync","resumeAsync","activeStreams.current.some$argument_0","resumeAsync.then$argument_0","resumeAsync.then._catch$argument_0","<anonymous>","useLoadedVideo$argument_1"],"mappings":"AAA;ACkB;oBCC;qDCE;sCCI;iBDE;aDC;KDE;CDC;OKC;6CCU;KDE;+BCE;KDO;mDEC;KFa;0CGC;wCCU,sCD;KHS;oBHC;kBQO;SRE;mBSC;STG;KGC;oBHE;KGiB;oBHc;KGM;oBHC;eUC;SVU;KGC;kCQE;KRE;CLK"},"hasCjsExports":false},"type":"js/module"}]}